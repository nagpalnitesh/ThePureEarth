{% extends 'index.html' %} {% load static %} {% block title %} Your shopping
cart {% endblock %} {% block content %}
<div class="cart_add">
  <h1>My shopping cart</h1>
  {% if cart|length <= 0 %}
  <h1 class="cartempty">Your cart is empty</h1>
  <p class="homecart">
    <a href="/"> HomePage </a>
  </p>
  {% else %}
  <div class="cart-detail">
    <div class="cartinfo">
      <div class="row">
        <div class="col-sm-12 col-md-auto col-lg-8">
          {% for item in cart %} {% with product=item.product %}
          <div class="cartpro">
            <div class="row cartitem">
              <div class="col-sm-12 col-md-auto col-lg-4">
                <div class="itemimg">
                  <a href="{{ product.get_absolute_url }}">
                    <div
                      id="carouselExampleControls"
                      class="carousel slide"
                      data-ride="carousel"
                    >
                      <div class="carousel-inner">
                        {% for image in product.images.all %}
                        <div
                          class="carousel-item {% if forloop.counter0 == 0 %} active {% endif %}"
                          data-interval="{% if forloop.counter0 == 0 %} 10 {% endif %}"
                        >
                          <img
                            src="{{ image.image.url }}"
                            class="img-fluid d-block"
                            alt="..."
                          />
                        </div>
                        {% endfor %}
                      </div>
                    </div>
                  </a>
                </div>
              </div>
              <div class="col-sm-12 col-md-auto col-8">
                <div class="itemtxt">
                  <p>
                    <a href="{{ product.get_absolute_url }}">
                      {{ product.name }}
                    </a>
                  </p>
                  <p style="font-weight: 600">Rs. {{ item.total_price }}</p>
                </div>
              </div>
            </div>
            <form
              action="{% url 'cart:cart_add' product.id %}"
              class="col-6 qty-form"
              method="post"
            >
              {% csrf_token %}
              <div class="row">
                <div class="col-md-2">
                  <button
                    type="submit"
                    name="minus-cart"
                    class="btn btn-block btn-light border-left d-inline p-2"
                  >
                    -
                  </button>
                </div>
                <div class="col-md-2">
                  {{item.quantity}}
                  <input
                    hidden
                    type="number"
                    name="quantity"
                    value="{{item.quantity}}"
                  />
                </div>
                <div class="col-md-2">
                  <button
                    type="submit"
                    name="plus-cart"
                    class="btn btn-block btn-light border-left d-inline p-2"
                  >
                    +
                  </button>
                </div>
                <div class="col-md-6"></div>
              </div>
            </form>
            <form
              action="{% url 'cart:cart_remove' product.id %}"
              class="col-2"
              method="post"
            >
              {% csrf_token %}
              <button
                type="submit"
                name="remove"
                class="btn btn-block btn-light border-left"
              >
                Remove
              </button>
            </form>
            {% comment %} <span id="quantity">{{item.quantity}}</span>
            <a class="plus-cart btn" pid="{{product.id}}">+</a> {% endcomment %}
          </div>
          {% endwith %} {% endfor %}
          <div class="cartcheckitem">
            <p class="cartch">
              <a href="{% url 'pure:products_list' %}" class="shopcont">
                Continue shopping
              </a>
              {% if user.is_authenticated%}
              <a href="{% url 'orders:order_create' %}" class="cartcheck">
                Checkout
              </a>
              {% else %}
              <a href="/login" class="cartcheck"> Sign in to checkout </a>
              {% endif %}
            </p>
          </div>
        </div>
        <div class="col-sm-12 col-md-auto col-lg-4">
          <div class="cart-total">
            <div class="cartbox">
              <h2>Price Details</h2>
              <hr />
              <table class="cart-table">
                <tr class="price">
                  <td>Price</td>
                  <td>Rs. {{ cart.get_total_price }}</td>
                </tr>
                <tr class="price">
                  <td>Delivery Charges</td>
                  <td style="color: rgb(4, 167, 4); text-transform: uppercase">
                    Free
                  </td>
                </tr>
                <tr class="total">
                  <td>Total Amount</td>
                  <td>Rs. {{ cart.get_total_price }}</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>

{% endblock %}
